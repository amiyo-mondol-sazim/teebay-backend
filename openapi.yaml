openapi: 3.1.1
info:
  title: Teebay APIs
  description: Teebay APIs
  version: 1.0.0
servers:
  - url: "{base_url}"
    variables:
      base_url:
        default: http://localhost:5000
        description: Base URL for the API
security:
  - bearerAuth: []
components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  schemas:
    EUserRole:
      type: string
      enum:
        - SUPER_USER
        - ADMIN
    EUserState:
      type: string
      enum:
        - UNREGISTERED
        - ACTIVE
        - INACTIVE
    EVerificationRequestType:
      type: string
      enum:
        - EMAIL_VERIFICATION
        - RESET_PASSWORD
    EVerificationRequestStatus:
      type: string
      enum:
        - ACTIVE
        - EXPIRED

    Error:
      type: object
      properties:
        statusCode:
          type: number
        errors:
          type: array
          items:
            type: string
        message:
          type: string
      required:
        - statusCode
        - message
    BadRequestError:
      type: object
      properties:
        statusCode:
          type: number
          example: 400
        errors:
          type: array
          items:
            type: string
          example: []
        message:
          type: string
          example: Bad Request
    UnauthorizedError:
      type: object
      properties:
        statusCode:
          type: number
          example: 401
        errors:
          type: array
          items:
            type: string
          example: []
        message:
          type: string
          example: Unauthorized
    ForbiddenError:
      type: object
      properties:
        statusCode:
          type: number
          example: 403
        errors:
          type: array
          items:
            type: string
          example: []
        message:
          type: string
          example: Forbidden
    NotFoundError:
      type: object
      properties:
        statusCode:
          type: number
          example: 404
        errors:
          type: array
          items:
            type: string
          example: []
        message:
          type: string
          example: Not Found
    ConflictError:
      type: object
      properties:
        statusCode:
          type: number
          example: 409
        errors:
          type: array
          items:
            type: string
          example: []
        message:
          type: string
          example: Conflict
    InternalServerError:
      type: object
      properties:
        statusCode:
          type: number
          example: 500
        errors:
          type: array
          items:
            type: string
          example: []
        message:
          type: string
          example: Internal Server Error

    LoginRequest:
      type: object
      required:
        - email
        - password
      properties:
        email:
          type: string
          format: email
        password:
          type: string
    SignInResponse:
      type: object
      properties:
        accessToken:
          type: string
        user:
          $ref: "#/components/schemas/TokenizedUser"
    TokenizedUser:
      type: object
      properties:
        id:
          type: number
        claimId:
          type: number
        claim:
          $ref: "#/components/schemas/EUserRole"
        userProfileId:
          type: number
        email:
          type: string
    SelfRegisterUserDto:
      type: object
      required:
        - email
        - password
        - userProfile
      properties:
        email:
          type: string
          format: email
        password:
          type: string
          minLength: 8
        userProfile:
          $ref: "#/components/schemas/SelfRegisterUserProfileDto"
    SelfRegisterUserProfileDto:
      type: object
      required:
        - firstName
        - lastName
      properties:
        firstName:
          type: string
          minLength: 2
          maxLength: 255
        lastName:
          type: string
          minLength: 2
          maxLength: 255
    UserResponse:
      type: object
      properties:
        id:
          type: number
        email:
          type: string
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
        userProfile:
          $ref: "#/components/schemas/UserProfileResponse"
    UserProfileResponse:
      type: object
      properties:
        id:
          type: number
        firstName:
          type: string
        lastName:
          type: string
        email:
          type: string
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
        role:
          $ref: "#/components/schemas/RoleResponse"
    RoleResponse:
      type: object
      properties:
        id:
          type: number
        name:
          type: string
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    ForgotPasswordDto:
      type: object
      required:
        - email
      properties:
        email:
          type: string
          format: email
    ResetPasswordDto:
      type: object
      required:
        - password
      properties:
        password:
          type: string
          minLength: 8
    ChangePasswordDto:
      type: object
      required:
        - currentPassword
        - newPassword
      properties:
        currentPassword:
          type: string
        newPassword:
          type: string
          minLength: 8

    RegisterUserDto:
      type: object
      required:
        - email
        - userProfile
      properties:
        email:
          type: string
          format: email
        password:
          type: string
          minLength: 8
        userProfile:
          $ref: "#/components/schemas/UserProfileDto"
    UserProfileDto:
      type: object
      required:
        - firstName
        - lastName
        - roleId
      properties:
        firstName:
          type: string
          minLength: 2
          maxLength: 255
        lastName:
          type: string
          minLength: 2
          maxLength: 255
        roleId:
          type: number
    UpdateUserAsSuperuserDto:
      type: object
      properties:
        password:
          type: string
        state:
          $ref: "#/components/schemas/EUserState"
        roleId:
          type: number
    SuperuserFindAllUserResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/SuperuserUserResponse"
        meta:
          type: object
    SuperuserUserResponse:
      allOf:
        - $ref: "#/components/schemas/UserResponse"
        - type: object
          properties:
            state:
              $ref: "#/components/schemas/EUserState"

    UpdateRolesPermissionsDto:
      type: object
      required:
        - roleId
        - permissionsToRemoveIds
        - permissionsToAddIds
      properties:
        roleId:
          type: number
        permissionsToRemoveIds:
          type: array
          items:
            type: number
        permissionsToAddIds:
          type: array
          items:
            type: number
    RolesWithUsersAndPermissionsResponse:
      type: object
      properties:
        roles:
          type: array
          items:
            $ref: "#/components/schemas/RolesWithUsersCount"
        permissions:
          type: array
          items:
            $ref: "#/components/schemas/PermissionResponse"
    RolesWithUsersCount:
      type: object
      properties:
        role:
          $ref: "#/components/schemas/RoleResponse"
        activeUsersCount:
          type: number
        inactiveUsersCount:
          type: number
    PermissionResponse:
      type: object
      properties:
        id:
          type: number
        name:
          type: string
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    UpdateUserProfileDto:
      type: object
      properties:
        firstName:
          type: string
          minLength: 2
          maxLength: 255
        lastName:
          type: string
          minLength: 2
          maxLength: 255

    VerifyByTokenResponse:
      type: object
      properties:
        message:
          type: string
    VerificationRequestResponse:
      type: object
      properties:
        id:
          type: number
        token:
          type: string
        status:
          $ref: "#/components/schemas/EVerificationRequestStatus"
        type:
          $ref: "#/components/schemas/EVerificationRequestType"
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
        user:
          type: object
          properties:
            id:
              type: number

    ERentalPeriod:
      type: string
      enum:
        - DAY
        - WEEK
        - MONTH
    CreateProductDto:
      type: object
      required:
        - title
        - description
        - categories
        - purchasePrice
        - rentPrice
        - rentalPeriod
      properties:
        title:
          type: string
        description:
          type: string
        categories:
          type: array
          items:
            type: string
        purchasePrice:
          type: number
        rentPrice:
          type: number
        rentalPeriod:
          $ref: "#/components/schemas/ERentalPeriod"
    UpdateProductDto:
      type: object
      properties:
        title:
          type: string
        description:
          type: string
        categories:
          type: array
          items:
            type: string
        purchasePrice:
          type: number
        rentPrice:
          type: number
        rentalPeriod:
          $ref: "#/components/schemas/ERentalPeriod"
    ProductResponse:
      type: object
      properties:
        id:
          type: number
        title:
          type: string
        description:
          type: string
        categories:
          type: array
          items:
            type: string
        purchasePrice:
          type: number
        rentPrice:
          type: number
        rentalPeriod:
          $ref: "#/components/schemas/ERentalPeriod"
        viewCount:
          type: number
        owner:
          $ref: "#/components/schemas/UserResponse"
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    ProductsListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/ProductResponse"
        meta:
          type: object

paths:
  /api/v1/auth/sign-in:
    post:
      summary: Sign in with email and password
      tags: [Auth]
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/LoginRequest"
      responses:
        "200":
          description: Successful login
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SignInResponse"
        "400":
          description: Bad request - invalid input
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BadRequestError"
        "401":
          description: Invalid credentials
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UnauthorizedError"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InternalServerError"

  /api/v1/auth/google/sign-in:
    post:
      summary: Sign in with Google (OAuth flow)
      tags: [Auth]
      security: []
      responses:
        "200":
          description: Successful login
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SignInResponse"
        "400":
          description: Bad request - invalid input
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BadRequestError"
        "401":
          description: Google authentication failed
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UnauthorizedError"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InternalServerError"

  /api/v1/auth/google/token/sign-in:
    post:
      summary: Sign in with Google ID Token
      tags: [Auth]
      security: []
      responses:
        "200":
          description: Successful login
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SignInResponse"
        "400":
          description: Bad request - invalid input
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BadRequestError"
        "401":
          description: Invalid Google token or email not verified
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UnauthorizedError"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InternalServerError"

  /api/v1/auth/sign-up:
    post:
      summary: Register a new user
      tags: [Auth]
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SelfRegisterUserDto"
      responses:
        "201":
          description: User registered successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserResponse"
        "400":
          description: Bad request - validation failed or user already exists
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BadRequestError"
        "409":
          description: Conflict - user already exists
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ConflictError"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InternalServerError"

  /api/v1/auth/forgot-password:
    post:
      summary: Request a password reset email
      tags: [Auth]
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ForgotPasswordDto"
      responses:
        "201":
          description: Email sent successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
        "400":
          description: Bad request - invalid input
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BadRequestError"
        "404":
          description: User not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NotFoundError"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InternalServerError"

  /api/v1/auth/reset-password/{token}:
    post:
      summary: Reset password using token
      tags: [Auth]
      security: []
      parameters:
        - in: path
          name: token
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ResetPasswordDto"
      responses:
        "201":
          description: Password reset successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserResponse"
        "400":
          description: Bad request - invalid token or expired token
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BadRequestError"
        "404":
          description: User or token not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NotFoundError"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InternalServerError"

  /api/v1/auth/change-password:
    post:
      summary: Change password for logged in user
      tags: [Auth]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ChangePasswordDto"
      responses:
        "201":
          description: Password changed successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserResponse"
        "400":
          description: Bad request - invalid input
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BadRequestError"
        "401":
          description: Unauthorized - invalid current password or not authenticated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UnauthorizedError"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InternalServerError"

  /api/v1/users/me:
    get:
      summary: Get current logged in user details
      tags: [Users]
      responses:
        "200":
          description: Current user details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TokenizedUser"
        "401":
          description: Unauthorized - not authenticated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UnauthorizedError"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InternalServerError"

  /api/v1/users:
    get:
      summary: Get all users (SuperUser only)
      tags: [Users]
      parameters:
        - in: query
          name: page
          schema:
            type: number
        - in: query
          name: limit
          schema:
            type: number
        - in: query
          name: state
          schema:
            $ref: "#/components/schemas/EUserState"
      responses:
        "200":
          description: List of users
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuperuserFindAllUserResponse"
        "400":
          description: Bad request - invalid query parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BadRequestError"
        "401":
          description: Unauthorized - not authenticated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UnauthorizedError"
        "403":
          description: Forbidden - insufficient permissions (SuperUser required)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ForbiddenError"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InternalServerError"
    post:
      summary: Create a new user (SuperUser only)
      tags: [Users]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RegisterUserDto"
      responses:
        "201":
          description: User created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserResponse"
        "400":
          description: Bad request - validation failed or user already exists
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BadRequestError"
        "401":
          description: Unauthorized - not authenticated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UnauthorizedError"
        "403":
          description: Forbidden - insufficient permissions (SuperUser required)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ForbiddenError"
        "409":
          description: Conflict - user already exists
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ConflictError"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InternalServerError"

  /api/v1/users/{id}:
    patch:
      summary: Update user (SuperUser only)
      tags: [Users]
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: number
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateUserAsSuperuserDto"
      responses:
        "200":
          description: User updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserResponse"
        "400":
          description: Bad request - invalid input
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BadRequestError"
        "401":
          description: Unauthorized - not authenticated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UnauthorizedError"
        "403":
          description: Forbidden - insufficient permissions (SuperUser required)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ForbiddenError"
        "404":
          description: User not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NotFoundError"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InternalServerError"

  /api/v1/roles:
    get:
      summary: Get all roles (SuperUser only)
      tags: [Roles]
      responses:
        "200":
          description: List of roles
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/RoleResponse"
        "401":
          description: Unauthorized - not authenticated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UnauthorizedError"
        "403":
          description: Forbidden - insufficient permissions (SuperUser required)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ForbiddenError"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InternalServerError"

  /api/v1/roles/users-permissions:
    get:
      summary: Get roles with user counts and permissions (Admin/SuperUser)
      tags: [Roles]
      responses:
        "200":
          description: Roles with permissions info
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RolesWithUsersAndPermissionsResponse"
        "401":
          description: Unauthorized - not authenticated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UnauthorizedError"
        "403":
          description: Forbidden - insufficient permissions (Admin/SuperUser required)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ForbiddenError"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InternalServerError"

  /api/v1/roles/update-permissions:
    patch:
      summary: Update role permissions (Admin/SuperUser)
      tags: [Roles]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateRolesPermissionsDto"
      responses:
        "200":
          description: Permissions updated
          content:
            application/json:
              schema:
                type: object
        "400":
          description: Bad request - invalid input
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BadRequestError"
        "401":
          description: Unauthorized - not authenticated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UnauthorizedError"
        "403":
          description: Forbidden - insufficient permissions (Admin/SuperUser required)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ForbiddenError"
        "404":
          description: Role or permission not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NotFoundError"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InternalServerError"

  /api/v1/user-profiles/me:
    get:
      summary: Get current user profile
      tags: [User Profiles]
      responses:
        "200":
          description: User profile
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserProfileResponse"
        "401":
          description: Unauthorized - not authenticated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UnauthorizedError"
        "404":
          description: User profile not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NotFoundError"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InternalServerError"
    patch:
      summary: Update current user profile
      tags: [User Profiles]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateUserProfileDto"
      responses:
        "200":
          description: Profile updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserProfileResponse"
        "400":
          description: Bad request - invalid input
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BadRequestError"
        "401":
          description: Unauthorized - not authenticated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UnauthorizedError"
        "404":
          description: User profile not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NotFoundError"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InternalServerError"

  /api/v1/verification-requests/verify/{token}:
    post:
      summary: Verify a token
      tags: [Verification]
      security: []
      parameters:
        - in: path
          name: token
          required: true
          schema:
            type: string
        - in: query
          name: type
          required: true
          schema:
            $ref: "#/components/schemas/EVerificationRequestType"
      responses:
        "200":
          description: Verification successful
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/VerifyByTokenResponse"
        "400":
          description: Bad request - invalid or expired token
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BadRequestError"
        "404":
          description: Token or user not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NotFoundError"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InternalServerError"

  /api/v1/verification-requests/{token}:
    get:
      summary: Get verification request details
      tags: [Verification]
      security: []
      parameters:
        - in: path
          name: token
          required: true
          schema:
            type: string
        - in: query
          name: type
          required: true
          schema:
            $ref: "#/components/schemas/EVerificationRequestType"
      responses:
        "200":
          description: Verification request details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/VerificationRequestResponse"
        "400":
          description: Bad request - invalid input
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BadRequestError"
        "404":
          description: Verification request not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NotFoundError"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InternalServerError"

  /api/v1/products:
    get:
      summary: Get all products
      tags: [Products]
      parameters:
        - in: query
          name: page
          schema:
            type: number
        - in: query
          name: limit
          schema:
            type: number
      responses:
        "200":
          description: List of products
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProductsListResponse"
        "400":
          description: Bad request - invalid query parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BadRequestError"
        "401":
          description: Unauthorized - not authenticated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UnauthorizedError"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InternalServerError"
    post:
      summary: Create a product
      tags: [Products]
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateProductDto"
      responses:
        "201":
          description: Product created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProductResponse"
        "400":
          description: Bad request - validation failed
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BadRequestError"
        "401":
          description: Unauthorized - not authenticated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UnauthorizedError"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InternalServerError"

  /api/v1/products/{id}:
    get:
      summary: Get one product by ID
      tags: [Products]
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: number
      responses:
        "200":
          description: Product details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProductResponse"
        "400":
          description: Bad request - invalid ID format
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BadRequestError"
        "401":
          description: Unauthorized - not authenticated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UnauthorizedError"
        "404":
          description: Product not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NotFoundError"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InternalServerError"
    patch:
      summary: Update a product
      tags: [Products]
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: number
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateProductDto"
      responses:
        "200":
          description: Product updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProductResponse"
        "400":
          description: Bad request - validation failed or invalid ID
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BadRequestError"
        "401":
          description: Unauthorized - not authenticated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UnauthorizedError"
        "403":
          description: Forbidden - you can only update your own products
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ForbiddenError"
        "404":
          description: Product not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NotFoundError"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InternalServerError"
    delete:
      summary: Delete a product
      tags: [Products]
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: number
      responses:
        "200":
          description: Product deleted
        "400":
          description: Bad request - invalid ID format
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BadRequestError"
        "401":
          description: Unauthorized - not authenticated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UnauthorizedError"
        "403":
          description: Forbidden - you can only delete your own products
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ForbiddenError"
        "404":
          description: Product not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NotFoundError"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InternalServerError"

  /api/v1/products/owner/{ownerId}:
    get:
      summary: Get products by owner
      tags: [Products]
      parameters:
        - in: path
          name: ownerId
          required: true
          schema:
            type: number
        - in: query
          name: page
          schema:
            type: number
        - in: query
          name: limit
          schema:
            type: number
      responses:
        "200":
          description: List of products
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProductsListResponse"
        "400":
          description: Bad request - invalid parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BadRequestError"
        "401":
          description: Unauthorized - not authenticated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UnauthorizedError"
        "404":
          description: Owner not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NotFoundError"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InternalServerError"

  /api/v1/products/{id}/views:
    patch:
      summary: Increment product views
      tags: [Products]
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: number
      responses:
        "200":
          description: Product views incremented
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProductResponse"
        "400":
          description: Bad request - invalid ID format
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BadRequestError"
        "401":
          description: Unauthorized - not authenticated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UnauthorizedError"
        "404":
          description: Product not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NotFoundError"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InternalServerError"

  /api/v1/health:
    get:
      summary: Simple health check
      tags: [Health]
      security: []
      responses:
        "200":
          description: Service is up
          content:
            text/plain:
              schema:
                type: string
                example: OK
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InternalServerError"

  /api/v1/health/check:
    get:
      summary: Detailed health check
      tags: [Health]
      security: []
      responses:
        "200":
          description: Detailed health status
          content:
            application/json:
              schema:
                type: object
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InternalServerError"
